<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="module">
        import { updatedRecipeList as algo1, addTag as addAlgo1, getAllIngredients, getAllAppareils, getAllUstensiles } from "./js/services/dataManagerAlgo1.js";
        import { updatedRecipeList as algo2, addTag as addAlgo2} from "./js/services/dataManager.js";

        const algos = {
            1: {
                temps: 0,
                add: addAlgo1,
                updatedRecipeList: algo1
            },
            2: {
                temps: 0,
                add: addAlgo2,
                updatedRecipeList: algo2
            },
        };

        /**
         * point de départ
         * @type {Date}
         */
        let start;
        addElements({
            "Ustensiles": ["fourchette"],
            "Appareil": ["Four"],
            "Ingrédients": ["sucre", "creme fraiche"]
        })
        for (let max=1000; max>0; max--){
            sequence(1, function () { algos[1].updatedRecipeList() });
            sequence(2, function () { algos[2].updatedRecipeList(); });
        }

        console.log("algo 1 : ", algos[1].temps, " ms", "\r\n", "algo 2 : ", algos[2].temps, " ms");

        function addElements(list) {
            for (const [key, value] of Object.entries(list)) {
                value.forEach(elm => {
                    console.log(key, elm)
                    sequence(1, function () { algos[1].add(elm, key) });
                    sequence(2, function () { algos[2].add(elm, key) });
                });
            }
        }

        /**
         * @param  {Number} idAlgo
         * @param  {Function} method
         * @return {void}
         */
        function sequence(idAlgo, method) {
            const start = Date.now();
            method();
            const gap = Date.now() - start;
            console.log(gap);
            algos[idAlgo].temps += gap;
        }
    </script>
</head>
<body>
    
</body>
</html>